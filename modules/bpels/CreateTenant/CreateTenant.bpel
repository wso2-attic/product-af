<!-- CreateTenant BPEL Process [Generated by the Eclipse BPEL Designer] -->
<!-- Date: Mon Mar 05 12:13:11 IST 2012 -->
<bpel:process name="CreateTenant"
         targetNamespace="http://wso2.org/bps/sample"
         suppressJoinFailure="yes"
         xmlns:tns="http://wso2.org/bps/sample"
         xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
         xmlns:ns="http://services.mgt.tenant.carbon.wso2.org" xmlns:xsd="http://beans.common.stratos.carbon.wso2.org/xsd" xmlns:ns0="http://services.core.appfactory.carbon.wso2.org" xmlns:ns1="http://services.mgt.tenant.appfactory.carbon.wso2.org">

    <!-- Import the client WSDL -->
    <bpel:import namespace="http://services.core.appfactory.carbon.wso2.org" location="AppFactoryTenantInfraStructureInitializerService.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>
    <bpel:import namespace="http://services.mgt.tenant.carbon.wso2.org" location="TenantMgtAdminService.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>
    <bpel:import location="CreateTenantArtifacts.wsdl" namespace="http://wso2.org/bps/sample" 
	        importType="http://schemas.xmlsoap.org/wsdl/" />
         
    <!-- ================================================================= -->         
    <!-- PARTNERLINKS                                                      -->
    <!-- List of services participating in this BPEL process               -->
    <!-- ================================================================= -->         
    <bpel:partnerLinks>
        <!-- The 'client' role represents the requester of this service. -->
        <bpel:partnerLink name="client"
                     partnerLinkType="tns:CreateTenant"
                     myRole="CreateTenantProvider"
                     />
        
        
        
        
        
        
        
        <bpel:partnerLink name="AppFactoryTenantInfraStructureInitializerServicePL" partnerLinkType="tns:AppFactoryTenantInfraStructureInitializerServicePLT" partnerRole="AppFactoryTenantInfraStructureInitializerServiceProvider"></bpel:partnerLink>
    </bpel:partnerLinks>
  
    <!-- ================================================================= -->         
    <!-- VARIABLES                                                         -->
    <!-- List of messages and XML documents used within this BPEL process  -->
    <!-- ================================================================= -->         
    <bpel:variables>
        <!-- Reference to the message passed as input during initiation -->
        <bpel:variable name="input"
                  messageType="tns:CreateTenantRequestMessage"/>
                  
        <!-- 
          Reference to the message that will be returned to the requester
          -->
        <bpel:variable name="output"
                  messageType="tns:CreateTenantResponseMessage"/>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <bpel:variable name="AppFactoryTenantInfraStructureInitializerServicePLResponse" messageType="ns0:initializeRepositoryManagerResponse"></bpel:variable>
        <bpel:variable name="AppFactoryTenantInfraStructureInitializerServicePLRequest" messageType="ns0:initializeRepositoryManagerRequest"></bpel:variable>
        <bpel:variable name="AppFactoryTenantInfraStructureInitializerServicePLResponse1" messageType="ns0:initializeBuildManagerResponse"></bpel:variable>
        <bpel:variable name="AppFactoryTenantInfraStructureInitializerServicePLRequest1" messageType="ns0:initializeBuildManagerRequest"></bpel:variable>
        <bpel:variable name="AppFactoryTenantInfraStructureInitializerServicePLResponse3" messageType="ns0:initializeCloudManagerResponse"></bpel:variable>
        <bpel:variable name="AppFactoryTenantInfraStructureInitializerServicePLRequest3" messageType="ns0:initializeCloudManagerRequest"></bpel:variable>
        <bpel:variable name="AppFactoryTenantInfraStructureInitializerServicePLResponse2" messageType="ns0:notifyTenantCreationListnersResponse"></bpel:variable>
        <bpel:variable name="AppFactoryTenantInfraStructureInitializerServicePLRequest2" messageType="ns0:notifyTenantCreationListnersRequest"></bpel:variable>
    </bpel:variables>

    <!-- ================================================================= -->         
    <!-- ORCHESTRATION LOGIC                                               -->
    <!-- Set of activities coordinating the flow of messages across the    -->
    <!-- services integrated within this business process                  -->
    <!-- ================================================================= -->         
    <bpel:sequence name="main">
        
        <!-- Receive input from requester. 
             Note: This maps to operation defined in CreateTenant.wsdl 
             -->
        <bpel:sequence name="Sequence">
            <bpel:receive name="receiveInput" partnerLink="client" portType="tns:CreateTenant" operation="process" variable="input" createInstance="yes" />
            
            
            
            
            
            
            
            
            
            
            
            
            
            <bpel:assign validate="no" name="Assign-initializeRepositoryManager">
                
                
                
                
                <bpel:copy>
                    <bpel:from><bpel:literal xml:space="preserve"><p:initializeRepositoryManager xmlns:p="http://services.core.appfactory.carbon.wso2.org">
<xs:tenantDomain xmlns:xs="http://services.core.appfactory.carbon.wso2.org"></xs:tenantDomain>
<xs:usagePlan xmlns:xs="http://services.core.appfactory.carbon.wso2.org"></xs:usagePlan>
</p:initializeRepositoryManager></bpel:literal>
                    
                    </bpel:from><bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest"></bpel:to>
                
                
                </bpel:copy>
                <bpel:copy><bpel:from part="payload" variable="input">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:tenantDomain]]></bpel:query>
                    </bpel:from>
                    <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:tenantDomain]]></bpel:query>
                    </bpel:to>
                
                </bpel:copy>
                <bpel:copy><bpel:from part="payload" variable="input">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:usagePlan]]></bpel:query>
                    </bpel:from>
                    <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:usagePlan]]></bpel:query>
                    </bpel:to>
                
                </bpel:copy>
            </bpel:assign>
            <bpel:invoke name="Invoke-initializeRepositoryManager" partnerLink="AppFactoryTenantInfraStructureInitializerServicePL" operation="initializeRepositoryManager" portType="ns0:AppFactoryTenantInfraStructureInitializerServicePortType" inputVariable="AppFactoryTenantInfraStructureInitializerServicePLRequest" outputVariable="AppFactoryTenantInfraStructureInitializerServicePLResponse"></bpel:invoke>
            <bpel:assign validate="no" name="Assign-initializeBuildManager">
                
                
                
                
                <bpel:copy>
                    <bpel:from><bpel:literal xml:space="preserve"><p:initializeBuildManager xmlns:p="http://services.core.appfactory.carbon.wso2.org">
<xs:tenantDomain xmlns:xs="http://services.core.appfactory.carbon.wso2.org"></xs:tenantDomain>
<xs:usagePlan xmlns:xs="http://services.core.appfactory.carbon.wso2.org"></xs:usagePlan>
 </p:initializeBuildManager></bpel:literal>
                    
                    </bpel:from><bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest1"></bpel:to>
                
                
                </bpel:copy>
                <bpel:copy><bpel:from part="payload" variable="input">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:tenantDomain]]></bpel:query>
                    </bpel:from>
                    <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest1">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:tenantDomain]]></bpel:query>
                    </bpel:to>
                
                </bpel:copy>
                <bpel:copy><bpel:from part="payload" variable="input">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:usagePlan]]></bpel:query>
                    </bpel:from>
                    <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest1">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:usagePlan]]></bpel:query>
                    </bpel:to>
                
                </bpel:copy>
            </bpel:assign>
            <bpel:invoke name="Invoke-initializeBuildManager" partnerLink="AppFactoryTenantInfraStructureInitializerServicePL" operation="initializeBuildManager" portType="ns0:AppFactoryTenantInfraStructureInitializerServicePortType" inputVariable="AppFactoryTenantInfraStructureInitializerServicePLRequest1" outputVariable="AppFactoryTenantInfraStructureInitializerServicePLResponse1"></bpel:invoke>
            
            
            <bpel:flow name="Flow"><bpel:sequence name="Sequence">
                    <bpel:assign validate="no" name="Assign-initializeCloudManager">
                        
                        <bpel:copy><bpel:from>
                                <bpel:literal xml:space="preserve"><p:initializeCloudManager xmlns:p="http://services.core.appfactory.carbon.wso2.org">
<ax266:bean xmlns:ax266="http://services.core.appfactory.carbon.wso2.org">
<xs:active xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">true</xs:active>
<xs:admin xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">admin</xs:admin>
<xs:adminPassword xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">test123</xs:adminPassword>
<xs:createdDate xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd"></xs:createdDate>
<xs:email xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">admin@example.com</xs:email>
<xs:firstname xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">admin</xs:firstname>
<xs:lastname xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">admin</xs:lastname>
<xs:originatedService xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">AF</xs:originatedService>
<xs:successKey xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">success</xs:successKey>
<xs:tenantDomain xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">foo.com</xs:tenantDomain>
<xs:tenantId xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">0</xs:tenantId>
<xs:usagePlan xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">Demo</xs:usagePlan>
</ax266:bean>
</p:initializeCloudManager></bpel:literal>
                            
                            
                            </bpel:from>
                            <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest3"></bpel:to>
                        
                        
                        
                        
                        
                        
                        
                        </bpel:copy>
                        <bpel:copy><bpel:from part="payload" variable="input">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                                    <![CDATA[tns:admin]]>
                                </bpel:query>
                            </bpel:from>
                            <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest3">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:admin]]></bpel:query>
                            </bpel:to>
                        
                        </bpel:copy>
                        <bpel:copy><bpel:from part="payload" variable="input">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:firstName]]></bpel:query>
                            </bpel:from>
                            <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest3">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:firstname]]></bpel:query>
                            </bpel:to>
                        
                        </bpel:copy>
                        <bpel:copy><bpel:from part="payload" variable="input">
                            <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:lastName]]></bpel:query>
                            </bpel:from>
                            <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest3">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:lastname]]></bpel:query>
                            </bpel:to>
                        </bpel:copy>
                        <bpel:copy><bpel:from part="payload" variable="input">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                                    <![CDATA[tns:tenantDomain]]>
                                </bpel:query>
                            </bpel:from>
                            <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest3">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:tenantDomain]]></bpel:query>
                            </bpel:to>
                        
                        </bpel:copy>
                        <bpel:copy><bpel:from part="payload" variable="input">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                                    <![CDATA[tns:email]]>
                                </bpel:query>
                            </bpel:from>
                            <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest3">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:email]]></bpel:query>
                            </bpel:to>
                        
                        </bpel:copy>
                        <bpel:copy><bpel:from part="payload" variable="input">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:active]]></bpel:query>
                            </bpel:from>
                            <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest3">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:active]]></bpel:query>
                            </bpel:to>
                        
                        </bpel:copy>
                        <bpel:copy><bpel:from part="payload" variable="input">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:successKey]]></bpel:query>
                            </bpel:from>
                            <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest3">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:successKey]]></bpel:query>
                            </bpel:to>
                        
                        </bpel:copy>
                        <bpel:copy><bpel:from part="payload" variable="input">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:createdDate]]></bpel:query>
                            </bpel:from>
                            <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest3">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:createdDate]]></bpel:query>
                            </bpel:to>
                        
                        </bpel:copy>
                        <bpel:copy><bpel:from part="payload" variable="input">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:originatedService]]></bpel:query>
                            </bpel:from>
                            <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest3">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:originatedService]]></bpel:query>
                            </bpel:to>
                        
                        </bpel:copy>
                        <bpel:copy><bpel:from part="payload" variable="input">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:usagePlan]]></bpel:query>
                            </bpel:from>
                            <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest3">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:usagePlan]]></bpel:query>
                            </bpel:to>
                        
                        </bpel:copy>
                        <bpel:copy>
                            <bpel:from part="payload" variable="input">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                                    <![CDATA[tns:adminPassword]]>
                                </bpel:query>
                            </bpel:from>
                            <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest3">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                                    <![CDATA[ns0:bean/xsd:adminPassword]]>
                                </bpel:query>
                            </bpel:to>
                        </bpel:copy>
                        <bpel:copy>
                            <bpel:from part="payload" variable="input">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:tenantId]]></bpel:query>
                            </bpel:from>
                            <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest3">
                                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:tenantId]]></bpel:query>
                            </bpel:to>
                        </bpel:copy>
                    </bpel:assign>
                    <bpel:invoke name="Invoke-initializeCloudManager" partnerLink="AppFactoryTenantInfraStructureInitializerServicePL" operation="initializeCloudManager" portType="ns0:AppFactoryTenantInfraStructureInitializerServicePortType" inputVariable="AppFactoryTenantInfraStructureInitializerServicePLRequest3" outputVariable="AppFactoryTenantInfraStructureInitializerServicePLResponse3"></bpel:invoke>
                </bpel:sequence>
 </bpel:flow>
            <bpel:assign validate="no" name="Assign-notifyTenantCreationListners">
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <bpel:copy><bpel:from><bpel:literal xml:space="preserve"><p:notifyTenantCreationListners xmlns:p="http://services.core.appfactory.carbon.wso2.org"><ax260:bean xmlns:ax260="http://services.core.appfactory.carbon.wso2.org">
         <xs:active xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">true</xs:active>
         <xs:admin xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">admin</xs:admin>
         <xs:adminPassword xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">admin</xs:adminPassword>
         <xs:createdDate xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd"></xs:createdDate>
         <xs:email xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">admin@admin.com</xs:email>
         <xs:firstname xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">admin</xs:firstname>
         <xs:lastname xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">admin</xs:lastname>
         <xs:originatedService xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">AF</xs:originatedService>
         <xs:successKey xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">success</xs:successKey>
         <xs:tenantDomain xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">foo.com</xs:tenantDomain>
         <xs:tenantId xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">0</xs:tenantId>
         <xs:usagePlan xmlns:xs="http://beans.common.stratos.carbon.wso2.org/xsd">Demo</xs:usagePlan>
      </ax260:bean>
</p:notifyTenantCreationListners></bpel:literal>
                    
                    
                    
                    </bpel:from><bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest2"></bpel:to>
                
                
                
                
                
                
                
                
                
                </bpel:copy>
                <bpel:copy><bpel:from part="payload" variable="input">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:admin]]></bpel:query>
                    </bpel:from>
                    <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest2">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                            <![CDATA[ns0:bean/xsd:admin]]>
                        </bpel:query>
                    </bpel:to>
                
                </bpel:copy>
                <bpel:copy><bpel:from part="payload" variable="input">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                            <![CDATA[tns:firstName]]>
                        </bpel:query>
                    </bpel:from>
                    <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest2">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                            <![CDATA[ns0:bean/xsd:firstname]]>
                        </bpel:query>
                    </bpel:to>
                
                </bpel:copy>
                <bpel:copy><bpel:from part="payload" variable="input">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:lastName]]></bpel:query>
                    </bpel:from>
                    <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest2">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:lastname]]></bpel:query>
                    </bpel:to>
                
                </bpel:copy>
                <bpel:copy><bpel:from part="payload" variable="input">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:adminPassword]]></bpel:query>
                    </bpel:from>
                    <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest2">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:adminPassword]]></bpel:query>
                    </bpel:to>
                
                </bpel:copy>
                <bpel:copy><bpel:from part="payload" variable="input">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:tenantDomain]]></bpel:query>
                    </bpel:from>
                    <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest2">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:tenantDomain]]></bpel:query>
                    </bpel:to>
                
                </bpel:copy>
                <bpel:copy><bpel:from part="payload" variable="input">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:email]]></bpel:query>
                    </bpel:from>
                    <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest2">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:email]]></bpel:query>
                    </bpel:to>
                
                </bpel:copy>
                <bpel:copy><bpel:from part="payload" variable="input">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:active]]></bpel:query>
                    </bpel:from>
                    <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest2">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:active]]></bpel:query>
                    </bpel:to>
                
                </bpel:copy>
                <bpel:copy><bpel:from part="payload" variable="input">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:successKey]]></bpel:query>
                    </bpel:from>
                    <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest2">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:successKey]]></bpel:query>
                    </bpel:to>
                
                </bpel:copy>
                <bpel:copy><bpel:from part="payload" variable="input">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:createdDate]]></bpel:query>
                    </bpel:from>
                    <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest2">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:createdDate]]></bpel:query>
                    </bpel:to>
                
                </bpel:copy>
                <bpel:copy><bpel:from part="payload" variable="input">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:originatedService]]></bpel:query>
                    </bpel:from>
                    <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest2">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:originatedService]]></bpel:query>
                    </bpel:to>
                
                </bpel:copy>
                <bpel:copy><bpel:from part="payload" variable="input">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:usagePlan]]></bpel:query>
                    </bpel:from>
                    <bpel:to part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLRequest2">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[ns0:bean/xsd:usagePlan]]></bpel:query>
                    </bpel:to>
                
                </bpel:copy>
            </bpel:assign>
            <bpel:invoke name="Invoke-notifyTenantCreationListners" partnerLink="AppFactoryTenantInfraStructureInitializerServicePL" operation="notifyTenantCreationListners" portType="ns0:AppFactoryTenantInfraStructureInitializerServicePortType" inputVariable="AppFactoryTenantInfraStructureInitializerServicePLRequest2" outputVariable="AppFactoryTenantInfraStructureInitializerServicePLResponse2"></bpel:invoke>
            <bpel:assign validate="no" name="Assign-result"><bpel:copy>
                <bpel:from>
                    <bpel:literal>
                        <tns:CreateTenantResponse xmlns:tns="http://wso2.org/bps/sample" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><tns:result>tns:result</tns:result>

                        </tns:CreateTenantResponse>
                    </bpel:literal>
                </bpel:from>
                <bpel:to variable="output" part="payload"></bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from part="parameters" variable="AppFactoryTenantInfraStructureInitializerServicePLResponse">
                        <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                            <![CDATA[ns0:return]]>
                        </bpel:query>
                    </bpel:from>
                <bpel:to part="payload" variable="output">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:result]]></bpel:query>
                </bpel:to>
            </bpel:copy>
        
            </bpel:assign>
            <bpel:reply name="replyOutput" partnerLink="client" portType="tns:CreateTenant" operation="process" variable="output" />
        </bpel:sequence>
        
        
        
        
        <!-- Generate reply to synchronous request -->
        
        
        
        
        
        
        
        
        
        
        
    </bpel:sequence>
</bpel:process>

