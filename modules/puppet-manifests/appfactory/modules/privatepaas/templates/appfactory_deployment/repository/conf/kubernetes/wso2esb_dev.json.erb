{
    "type": "<%=@esb_dev_cartridge_type %>",
    "provider": "wso2",
    "category": "framework",
    "host": "<%= @domain %>",
    "displayName": "WSO2ESB",
    "description": "WSO2 Enterprise Service Bus",
    "version": "4.9.0",
    "multiTenant": "true",
    "loadBalancingIPType": "public",
    "portMapping": [
        {
            "name": "http-9763",
            "protocol": "http",
            "port": "9763",
            "proxyPort": "80",
            "kubernetesPortType": "NodePort"

        },
        {
            "name": "http-9443",
            "protocol": "https",
            "port": "9443",
            "proxyPort": "443",
            "kubernetesPortType": "NodePort"
        },
        {
            "name": "pt-http",
            "protocol": "http",
            "port": 8280,
            "proxyPort": 81,
            "kubernetesPortType": "NodePort"
        },
        {
            "name": "pt-https",
            "protocol": "https",
            "port": 8243,
            "proxyPort": 444,
            "kubernetesPortType": "NodePort"
        }

    ],
    "deployment": {
        "baseDir": "/opt/wso2esb-4.9.0"
    },
    "iaasProvider": [
        {
            "type": "kubernetes",
            "imageId": "wso2/esb:4.9.0",
            "networkInterfaces": [
            ],
            "property": [
            ]
        }
    ],
    "property": [
        {
            "name": "KUBERNETES_CONTAINER_CPU",
            "value": "0"
        },
        {
            "name": "KUBERNETES_CONTAINER_MEMORY",
            "value": "0"
        },
        {
            "name": "KUBERNETES_SERVICE_SESSION_AFFINITY",
            "value": "ClientIP"
        },
        {
            "name": "payload_parameter.STAGE",
            "value": "Development"
        },
        {
            "name": "payload_parameter.START_CMD",
            "value": "PCA"
        },
        <%- database = @dev_registry_db -%>
        {
            "name": "payload_parameter.CONFIG_PARAM_REGISTRY_DB_URL",
            "value": "jdbc:mysql://<%= database[0] %>:3306/<%= database[1] %>"
        },
        {
            "name": "payload_parameter.CONFIG_PARAM_REGISTRY_DB_USER_NAME",
            "value": "<%= database[2] %>"
        },
        {
            "name": "payload_parameter.CONFIG_PARAM_REGISTRY_DB_PASSWORD",
            "value": "<%= database[3] %>"
        },
        <%- database = @dev_userstore_db -%>
        {
            "name": "payload_parameter.CONFIG_PARAM_USER_MGT_DB_URL",
            "value": "jdbc:mysql://<%= database[0] %>:3306/<%= database[1] %>"
	    },
        {
            "name": "payload_parameter.CONFIG_PARAM_USER_MGT_DB_USER_NAME",
            "value": "<%= database[2] %>"
        },
        {
            "name": "payload_parameter.CONFIG_PARAM_USER_MGT_DB_PASSWORD",
            "value": "<%= database[2] %>"
        },
        <%- database = @dev_config_db -%>
        {
            "name": "payload_parameter.CONFIG_PARAM_CONFIG_DB_URL",
            "value": "jdbc:mysql://<%= database[0] %>:3306/<%= database[1] %>"
         },
         {
            "name": "payload_parameter.CONFIG_PARAM_CONFIG_DB_USER_NAME",
            "value": "<%= database[2] %>"
         },
         {
            "name": "payload_parameter.CONFIG_PARAM_CONFIG_DB_PASSWORD",
            "value": "<%= database[2] %>"
         },
         {
            "name": "payload_parameter.CONFIG_PARAM_LDAP_HOST",
            "value": "<%= @ipaddress %>"
         },
         {
           "name": "payload_parameter.CONFIG_PARAM_WORKER_HOST_NAME",
           "value": "<%= dev_app_id %>.<%= @domain %>"
         },
         {
            "name": "payload_parameter.S2GIT_IP",
            "value": "<%= @ipaddress %>"
         },
         {
           "name": "payload_parameter.S2GIT_DOMAIN",
           "value": "s2git.<%= @domain %>"
         },
         {
           "name": "payload_parameter.APPFAC_IP",
           "value": "<%= @ipaddress %>"
         },
         {
           "name": "payload_parameter.APPFAC_DOMAIN",
           "value": "apps.<%= @domain %>"
         },
         {
             "name": "payload_parameter.PPAAS_MB_IP",
             "value": "<%= @ipaddress %>"
         },
         {
             "name": "payload_parameter.PPAAS_MB_PORT",
             "value": "61616"
         },
         {
             "name": "payload_parameter.BAM_IP",
             "value": "<%= @ipaddress %>"
         },
         {
            "name": "payload_parameter.BAM_DOMAIN",
            "value": "bam.<%= @domain %>"
         },
         {
            "name": "payload_parameter.THRIFT_IP",
            "value": "<%= @ipaddress %>"
         },
         {
            "name": "payload_parameter.THRIFT_DOMAIN",
            "value": "receiver1.<%= @domain %>"
         },
         {
            "name": "payload_parameter.MESSAGING_IP",
            "value": "<%= @ipaddress %>"
         },
         {
            "name": "payload_parameter.MESSAGING_DOMAIN",
            "value": "messaging.<%= @domain %>"
         },
         {
            "name": "payload_parameter.SOCIAL_IP",
            "value": "<%= @ipaddress %>"
         },
         {
            "name": "payload_parameter.SOCIAL_DOMAIN",
            "value": "social.<%= @domain %>"
         },
         {
            "name": "payload_parameter.LB_IP",
            "value": "<%= @ipaddress %>"
         },
         {
            "name": "payload_parameter.LB_DOMAIN",
            "value": "appfactoryelb.<%= @domain %>"
         },
         {
            "name": "payload_parameter.MYSQL_IP",
            "value": "<%= @ipaddress %>"
         },
         {
            "name": "payload_parameter.MYSQL_DOMAIN",
            "value": "mysql.<%= @domain %>"
         }
    ]
}
